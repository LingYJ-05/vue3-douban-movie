import{e as Q,n as U,w as q,t as G,c as H,g as K,j as W,E as X,k as Y,f as Z,d as O,l as ee,_ as te}from"./movie-components-CljETrP7.js";/* empty css                *//* empty css                        */import{d as ae,r as c,m as se,az as oe,c as p,a as s,L as I,I as w,R as o,J as r,P as _,Q as $,a6 as S,aA as ne,o as n,O as C,u as T}from"./vue-DrRnzbTh.js";import{u as le}from"./rank-e0nIagNn.js";import"./vendor-ngrFHoWO.js";import"./index-C7--y5oG.js";const re={class:"rank-detail"},ce={class:"header-bar"},ie={class:"title"},ue={key:0,class:"pagination-nav"},de={class:"movie-list"},pe=["onClick"],_e={class:"movie-poster"},me={class:"image-slot"},ve={class:"movie-info"},fe={class:"title"},ge={class:"director"},ke={class:"actor"},he=ae({__name:"rank-detail",setup(ye){const b=oe(),z=ne(),A=le(),f=c(!1),i=c([]),u=c(""),g=c(1),m=c(!1),E=c([]),D={top250:G,weekly:q,new:U,us:Q};se(()=>{const e=b.path;e.includes("top250")?(u.value="豆瓣 Top250",m.value=!0,E.value=[{label:"1-50",page:1},{label:"51-100",page:2},{label:"101-150",page:3},{label:"151-200",page:4},{label:"201-250",page:5}]):e.includes("weekly")?u.value="本周口碑榜":e.includes("new")?u.value="新片榜":e.includes("us")&&(u.value="北美票房榜"),k()});const k=async()=>{f.value=!0;const a=b.path.split("/").pop();try{const l=a?D[a]:void 0;if(l){const d=m?(g.value-1)*50:0,h=await l(d,m?50:void 0);i.value=h.subjects}else console.error(`Unknown rank type: ${a}`),i.value=[]}catch(l){console.error("加载排行榜数据失败:",l),i.value=[]}finally{f.value=!1}},M=e=>{g.value=e,k()},N=e=>!e||!Array.isArray(e)||e.length===0?"未知":e.slice(0,2).map(a=>a.name).join(" / "),P=e=>!e||typeof e!="object"||!e.large?"":`https://images.weserv.nl/?url=${e.large.replace(/^https?:\/\//,"").trim()}`,V=e=>{if(!e){console.error("电影ID为空，无法跳转");return}z.push(`/movie-detail/${e}`)},F=()=>{k()},L=()=>{A.updateShowCards(!0)};return(e,a)=>{const l=X,d=H,R=O,h=ee,j=W,J=K;return n(),p("div",re,[s("div",ce,[o(d,{type:"text",onClick:L,class:"back-btn"},{default:r(()=>[o(l,null,{default:r(()=>[o(T(Y))]),_:1}),a[0]||(a[0]=C(" Back ",-1))]),_:1}),s("h1",ie,_(u.value),1)]),m.value?(n(),p("div",ue,[(n(!0),p($,null,S(E.value,(t,v)=>(n(),w(d,{key:v,type:g.value===t.page?"primary":"default",onClick:y=>M(t.page),size:"small"},{default:r(()=>[C(_(t.label),1)]),_:2},1032,["type","onClick"]))),128))])):I("",!0),s("div",de,[(n(!0),p($,null,S(i.value,t=>{var v,y,x,B;return n(),p("div",{key:t.id,class:"movie-item",onClick:we=>V(t.id)},[s("div",_e,[o(R,{src:P(t.images),width:70,height:100,fit:"cover",lazy:""},{error:r(()=>[s("div",me,[o(l,null,{default:r(()=>[o(T(Z))]),_:1})])]),_:1},8,["src"])]),s("div",ve,[s("h3",fe,_(t.title),1),o(h,{"model-value":(((v=t.rating)==null?void 0:v.average)||0)/2,disabled:!0,"show-score":!0,max:5,"score-template":`${((y=t.rating)==null?void 0:y.average)||0}`,size:"small"},null,8,["model-value","score-template"]),s("div",ge," 导演："+_(((B=(x=t.directors)==null?void 0:x[0])==null?void 0:B.name)||"未知"),1),s("div",ke,"主演："+_(N(t.casts)),1)])],8,pe)}),128))]),f.value?(n(),w(j,{key:1,rows:5,animated:"",class:"loading-skeleton"})):i.value.length?I("",!0):(n(),w(J,{key:2,description:"暂无数据",class:"empty-state"},{default:r(()=>[o(d,{type:"primary",onClick:F},{default:r(()=>[...a[1]||(a[1]=[C("刷新",-1)])]),_:1})]),_:1}))])}}}),$e=te(he,[["__scopeId","data-v-ff28e7ff"]]);export{$e as default};
