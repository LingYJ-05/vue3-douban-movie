import{f as $,a as v,o as i,e as t,F as M,d as E,w as R,t as w,r as d,c as g,u as B,x as D,j as V,g as y,m as N,A as j,p as z,i as k,b as A,k as F}from"./vue-CHuA8iFr.js";import{_ as C,S as J}from"./movie-components-DFiMdlGe.js";import{R as Y}from"./rank-list-ComxCa6W.js";import"./vendor-ngrFHoWO.js";const G="/vue3-douban-movie/assets/avatar-C1GJYJau.jpg",O={class:"celebrity-list"},q=["onClick"],H={class:"image"},K={class:"",height:"100",width:"70"},P={class:"desc"},Q={class:"title"},U={class:"works"},W={__name:"celebrity-list",props:{celebrities:{type:Array,default:()=>[]}},emits:["select"],setup(b,{emit:_}){const l=_,n=s=>{l("select",s)},r=s=>s?"https://images.weserv.nl/?url="+s.replace(/http\w{0,1}:\/\//,""):"";return(s,u)=>{const o=$("lazy");return i(),v("div",O,[t("ul",null,[(i(!0),v(M,null,E(b.celebrities,c=>(i(),v("li",{class:"celebrity-item",key:c.id,onClick:m=>n(c.id)},[t("div",H,[R(t("img",K,null,512),[[o,r(c.image)]])]),t("div",P,[t("p",Q,w(c.name),1),t("div",U,"代表作: "+w(c.works),1)])],8,q))),128))])])}}},X=C(W,[["__scopeId","data-v-4540cdab"]]),Z={class:"user-center"},ee={class:"switch-item"},te={class:"user-item"},se={class:"movie-num"},ce={key:2,class:"develop"},ae={__name:"user-center",setup(b){const _=z(),l=B(),n=d(0),r=d([{name:"想看",count:0},{name:"看过",count:0},{name:"影人",count:0}]),s=d([]),u=d(0),o=d(null),c=g(()=>l.getters.wantedMovies),m=g(()=>l.getters.watchedMovies),p=g(()=>l.getters.collectedCelebrities),S=e=>{switch(e){case 0:return c.value;case 1:return m.value;case 2:return p.value;default:return[]}},x=e=>{n.value=e,f(),I()},f=()=>{const e=S(n.value);s.value=e||[],u.value=s.value.length},I=async()=>{var e,a;await F(),(e=o.value)!=null&&e.scrollTo&&o.value.scrollTo(0,0),(a=o.value)!=null&&a.refresh&&o.value.refresh()},L=e=>{l.commit("SET_MOVIE",e),_.push(`/movie-detail/${e.id}`)},T=e=>{l.commit("SET_CELEBRITY_ID",e),_.push(`/celebrity/${e}`)};return D([m,c,p],()=>{var e,a,h;r.value[0].count=((e=m.value)==null?void 0:e.length)||0,r.value[1].count=((a=c.value)==null?void 0:a.length)||0,r.value[2].count=((h=p.value)==null?void 0:h.length)||0,s.value.length!==u.value&&f()},{immediate:!0}),V(()=>{f()}),(e,a)=>{const h=j("Scroll");return i(),v("div",Z,[a[0]||(a[0]=t("div",{class:"user"},[t("div",{class:"avatar"},[t("img",{src:G,alt:"用户头像",width:"80",height:"80"})]),t("div",{class:"name"},"用户名")],-1)),t("div",ee,[y(J,{items:r.value,currentIndex:n.value,onSwitch:x},null,8,["items","currentIndex"]),y(h,{class:"list-scroll",ref_key:"scrollRef",ref:o},{default:N(()=>[t("div",te,[t("div",se,"共 "+w(u.value)+" 项",1),n.value!==2?(i(),k(Y,{key:0,movies:s.value,onSelect:L},null,8,["movies"])):(i(),k(X,{key:1,celebrities:s.value,onSelect:T},null,8,["celebrities"])),u.value===0?(i(),v("div",ce," 暂无内容，敬请期待 ")):A("",!0)])]),_:1},512)])])}}},re=C(ae,[["__scopeId","data-v-edb5a757"]]);export{re as default};
