import{_ as j,a as R,b as W,L as M}from"./movie-components-CkGoKDeo.js";import{r as l,j as $,a as C,o as h,e as t,g as m,i as S,b as E,m as L,y as O,p as B,t as k}from"./vue-BX9jk9wQ.js";import{t as Y,w as N,n as T,u as V}from"./movie-rank-BMAbb_30.js";import"./vendor-ngrFHoWO.js";class A{constructor(){let o=new Date;this.nowYear=o.getFullYear(),this.nowMonth=o.getMonth(),this.nowDay=o.getDate(),this.nowDayOfWeek=o.getDay(),this.nowDayOfWeek=this.nowDayOfWeek===0?7:this.nowDayOfWeek}formatDate(o){let i=o.getMonth()+1,c=o.getDate();return`${i}月${c}日`}getWeekStartDate(){let o=new Date(this.nowYear,this.nowMonth,this.nowDay-this.nowDayOfWeek+1);return this.formatDate(o)}getWeekEndDate(){let o=new Date(this.nowYear,this.nowMonth,this.nowDay+(6-this.nowDayOfWeek+1));return this.formatDate(o)}}const F={class:"rank"},P={class:"scroll-wrapper"},U={class:"scroll-content"},q={class:"rank-img"},z=["src"],G={class:"desc"},H={class:"brief"},J={class:"rank-img"},K=["src"],Q={class:"desc"},X={class:"brief"},Z={class:"rank-img"},x=["src"],I={class:"rank-img"},ss=["src"],ts={__name:"rank",setup(g){const o=B(),i=l(""),c=l(!1),d=l([]),w=l(null),_=()=>{o.push("/search")},f=l(!1),u=a=>{o.push(a)},p=a=>a?"https://images.weserv.nl/?url="+a.replace(/http\w{0,1}:\/\//,""):"",v=a=>{const s=[];a.forEach((n,e)=>{if(!n||!Array.isArray(n.subjects)){s[e]=[];return}const b=n.subjects.slice(0,3);s[e]=[],b.forEach(r=>{r.subject?r.subject.images&&r.subject.images.medium&&s[e].push(r.subject.images.medium):r.images&&r.images.medium&&s[e].push(r.images.medium)}),s[e].length>=2&&([s[e][0],s[e][1]]=[s[e][1],s[e][0]])});for(let n=0;n<s.length;n++)(!s[n]||s[n].length===0)&&(s[n]=["https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2588658240.jpg"]);d.value=s},D=()=>{const a=new A;i.value=`${a.getWeekStartDate()}-${a.getWeekEndDate()}`},y=async()=>{try{const[a,s,n,e]=await Promise.all([Y(),N(),T(),V()]);v([a,s,n,e]),c.value=!0}catch{}};return $(()=>{y(),D()}),(a,s)=>{const n=O("router-view");return h(),C("div",F,[t("div",{class:"go-search",onClick:_},[...s[4]||(s[4]=[t("div",{class:"logo"},[t("img",{src:R,width:"35",height:"35"})],-1),t("div",{class:"search-content"},[t("span",null,"电影/影人/标签")],-1)])]),m(W,{class:"rank-list",data:d.value,ref_key:"scrollRef",ref:w},{default:L(()=>[t("div",P,[t("div",U,[s[9]||(s[9]=t("h1",{class:"title"},"精选榜单",-1)),t("div",{class:"rank-item top250",onClick:s[0]||(s[0]=e=>u("/rank/top250"))},[s[5]||(s[5]=t("div",{class:"desc"},[t("h2",{class:"name"},"豆瓣 Top250"),t("span",null,"8分以上的好电影")],-1)),t("div",q,[t("img",{src:p("https://img3.doubanio.com/view/photo/s_ratio_poster/public/p480747492.jpg"),alt:"Top250电影"},null,8,z)])]),t("div",{class:"rank-item weekly",onClick:s[1]||(s[1]=e=>u("/rank/weekly"))},[t("div",G,[s[6]||(s[6]=t("h2",{class:"name"},"本周口碑榜",-1)),t("span",H,k(i.value),1)]),t("div",J,[t("img",{src:p("https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2867890123.jpg"),alt:"本周口碑电影"},null,8,K)])]),t("div",{class:"rank-item new-movie",onClick:s[2]||(s[2]=e=>u("/rank/new"))},[t("div",Q,[s[7]||(s[7]=t("h2",{class:"name"},"新片榜",-1)),t("span",X,k(i.value),1)]),t("div",Z,[t("img",{src:p("https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2856789342.jpg"),alt:"新片榜电影"},null,8,x)])]),t("div",{class:"rank-item us-box",onClick:s[3]||(s[3]=e=>u("/rank/us"))},[s[8]||(s[8]=t("div",{class:"desc"},[t("h2",{class:"name"},"北美票房榜"),t("span",{class:"brief"},"票房最高排名")],-1)),t("div",I,[t("img",{src:p("https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2548771326.jpg"),alt:"北美票房电影"},null,8,ss)])])])])]),_:1},8,["data"]),c.value?E("",!0):(h(),S(M,{key:0,fullScreen:f.value},null,8,["fullScreen"])),m(n)])}}},rs=j(ts,[["__scopeId","data-v-44ca3ded"]]);export{rs as default};
