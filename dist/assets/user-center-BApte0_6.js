import{_ as S,G as E,c as n,o as r,a as s,F as R,d as B,b as D,t as C,r as d,H as y,y as V,w as k,n as A,I as N,f as m,j,q as z,u as F,e as G,A as I}from"./index-DLCzzkkd.js";import{S as J}from"./switches-BRLQLFHU.js";import{R as Y}from"./rank-list-DdeAIle8.js";const q="/assets/avatar-C1GJYJau.jpg",H={class:"celebrity-list"},O=["onClick"],K={class:"image"},P={class:"",height:"100",width:"70"},Q={class:"desc"},U={class:"title"},W={class:"works"},X={__name:"celebrity-list",props:{celebrities:{type:Array,default:()=>[]}},emits:["select"],setup(w,{emit:p}){const f=p,c=t=>{f("select",t)},a=t=>t?"https://images.weserv.nl/?url="+t.replace(/http\w{0,1}:\/\//,""):"";return(t,o)=>{const l=E("lazy");return r(),n("div",H,[s("ul",null,[(r(!0),n(R,null,B(w.celebrities,i=>(r(),n("li",{class:"celebrity-item",key:i.id,onClick:u=>c(i.id)},[s("div",K,[D(s("img",P,null,512),[[l,a(i.image)]])]),s("div",Q,[s("p",U,C(i.name),1),s("div",W,"代表作: "+C(i.works),1)])],8,O))),128))])])}}},Z=S(X,[["__scopeId","data-v-4540cdab"]]),L={class:"user-center"},ee={class:"switch-item"},te={class:"user-item"},se={class:"movie-num"},le={key:0,class:"rank-list"},ae={key:1,class:"celebrity-list"},ce={key:2,class:"develop"},oe={__name:"user-center",emits:["hasLoad"],setup(w,{emit:p}){const f=p,c=d(0),a=d([{name:"想看",count:0},{name:"看过",count:0},{name:"影人",count:0}]),t=d([]),o=d(0),l=d(null),i=F(),u=V(),_=y(()=>u.getters.wantedMovies),g=y(()=>u.getters.watchedMovies),b=y(()=>u.getters.collectedCelebrities),x=e=>{i.push({path:`/movie-detail/${e.id}`}),u.commit("SET_MOVIE",e)},M=e=>{i.push({path:`/celebrity/${e}`}),u.commit("SET_CELEBRITY_ID",e)},T=e=>{switch(c.value=e,e){case 0:t.value=_.value;break;case 1:t.value=g.value;break;case 2:t.value=b.value;break}o.value=t.value.length,I(()=>{l.value&&l.value.scrollTo&&l.value.scrollTo(0,0),l.value&&l.value.refresh&&l.value.refresh()})};return k(_,e=>{c.value===0&&e&&(t.value=e,o.value=e.length,a.value[0].count=e.length)}),k(g,e=>{c.value===1&&e&&(t.value=e,o.value=e.length,a.value[1].count=e.length)}),k(b,e=>{c.value===2&&e&&(t.value=e,o.value=e.length,a.value[2].count=e.length)}),A(()=>{var v,h,$;const e=_.value||[];t.value=e,o.value=e.length,a.value[0].count=((v=_.value)==null?void 0:v.length)||0,a.value[1].count=((h=g.value)==null?void 0:h.length)||0,a.value[2].count=(($=b.value)==null?void 0:$.length)||0,f("hasLoad")}),N(()=>{I(()=>{l.value&&l.value.refresh&&l.value.refresh()})}),(e,v)=>{const h=z("scroll");return r(),n("div",L,[v[0]||(v[0]=s("div",{class:"user"},[s("div",{class:"avatar"},[s("img",{src:q,alt:"用户头像",width:"80",height:"80"})]),s("div",{class:"name"},"用户名")],-1)),s("div",ee,[m(J,{items:a.value,currentIndex:c.value,onSwitch:T},null,8,["items","currentIndex"]),m(h,{class:"list-scroll",ref_key:"scrollRef",ref:l},{default:j(()=>[s("div",te,[s("div",se," 共 "+C(o.value)+" 项 ",1),c.value!==2?(r(),n("div",le,[m(Y,{movies:t.value,onSelect:x},null,8,["movies"])])):(r(),n("div",ae,[m(Z,{celebrities:t.value,onSelect:M},null,8,["celebrities"])])),o.value===0?(r(),n("div",ce," 暂无内容，敬请期待 ")):G("",!0)])]),_:1},512)])])}}},ue=S(oe,[["__scopeId","data-v-b0af29dd"]]);export{ue as default};
