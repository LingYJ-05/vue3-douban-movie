import{_ as g,b as v,a as D,L as y}from"./movie-components-C9GzhsYF.js";import{r as p,j as f,a as l,o as i,e,g as h,i as b,b as W,p as C,m as M,aq as x,F as O,d as S,n as $,t as u}from"./vue-DIixMaZs.js";import"./vendor-ngrFHoWO.js";class j{constructor(){let t=new Date;this.nowYear=t.getFullYear(),this.nowMonth=t.getMonth(),this.nowDay=t.getDate(),this.nowDayOfWeek=t.getDay(),this.nowDayOfWeek=this.nowDayOfWeek===0?7:this.nowDayOfWeek}formatDate(t){let n=t.getMonth()+1,o=t.getDate();return`${n}月${o}日`}getWeekStartDate(){let t=new Date(this.nowYear,this.nowMonth,this.nowDay-this.nowDayOfWeek+1);return this.formatDate(t)}getWeekEndDate(){let t=new Date(this.nowYear,this.nowMonth,this.nowDay+(6-this.nowDayOfWeek+1));return this.formatDate(t)}}const L={class:"rank"},B={class:"scroll-wrapper"},E={class:"scroll-content"},Y=["onClick"],F={class:"desc"},N={class:"name"},V={class:"rank-img"},R=["src","alt"],T={__name:"rank",setup(d){const t=C(),n=p(!1),o=p([{id:"top250",type:"top250",title:"豆瓣 Top250",subtitle:"8分以上的好电影",path:"/rank/top250",poster:"https://img3.doubanio.com/view/photo/s_ratio_poster/public/p480747492.jpg"},{id:"weekly",type:"weekly",title:"本周口碑榜",subtitle:"",path:"/rank/weekly",poster:"https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2867890123.jpg"},{id:"new-movie",type:"new-movie",title:"新片榜",subtitle:"",path:"/rank/new",poster:"https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2856789342.jpg"},{id:"us-box",type:"us-box",title:"北美票房榜",subtitle:"票房最高排名",path:"/rank/us",poster:"https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2548771326.jpg"}]),w=()=>t.push("/search"),_=s=>t.push(s),k=s=>s?"https://images.weserv.nl/?url="+s.replace(/http\w{0,1}:\/\//,""):"",c=()=>{const s=new j;return`${s.getWeekStartDate()}-${s.getWeekEndDate()}`};return f(async()=>{o.value[1].subtitle=c(),o.value[2].subtitle=c();try{const s=await fetch("/api/weekly-movies");o.value[1].movies=s}catch(s){console.error("获取电影数据失败:",s)}n.value=!0}),(s,r)=>{const m=x("router-view");return i(),l("div",L,[e("div",{class:"go-search",onClick:w},[...r[0]||(r[0]=[e("div",{class:"logo"},[e("img",{src:v,width:"35",height:"35"})],-1),e("div",{class:"search-content"},[e("span",null,"电影/影人/标签")],-1)])]),h(D,{class:"rank-list",data:o.value,ref:"scrollRef"},{default:M(()=>[e("div",B,[e("div",E,[r[1]||(r[1]=e("h1",{class:"title"},"精选榜单",-1)),(i(!0),l(O,null,S(o.value,a=>(i(),l("div",{class:$(["rank-item",a.type]),key:a.id,onClick:q=>_(a.path)},[e("div",F,[e("h2",N,u(a.title),1),e("span",null,u(a.subtitle),1)]),e("div",V,[e("img",{src:k(a.poster),alt:a.title},null,8,R)])],10,Y))),128))])])]),_:1},8,["data"]),n.value?W("",!0):(i(),b(y,{key:0,fullScreen:!1})),h(m)])}}},G=g(T,[["__scopeId","data-v-1fc4836f"]]);export{G as default};
